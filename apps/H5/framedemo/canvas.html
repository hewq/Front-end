<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>sprite animation use canvas demo</title>
	<link rel="stylesheet" href="css/main.css">
    <script>
        !function(b,a){var c=b.documentElement;a=function(){var a=c.clientWidth;a&&(c.style.fontSize=a/(window.orientation === 0 || window.orientation === 180 ? 375 : 667)*100+"px")};window.addEventListener("orientationchange"in window?"orientationchange":"resize",a,!1);a()}(document,window);
    </script>
</head>
<body>
	<div class="page">
		<canvas></canvas>
	</div>
	<script>
		var imgPic = new Image();
		var canvas = document.querySelector('canvas');
		var ctx = canvas.getContext('2d');
		var i = 0;
		var lastTime = new Date().getTime();
		var delatime;
		var timer = 0;

		canvas.width = 100;
		canvas.height = 100;

		imgPic.onload = function () {
			drawImg();
		}

		imgPic.src = 'images/spritetest.png';

		function drawImg () {
			window.requestAnimationFrame(drawImg);
			var now = new Date().getTime();
			delatime = now - lastTime;
			lastTime = now;
			timer += delatime;
			if (timer > 200) {
				i++;
				if (i > 4) i = 0;
				timer = 0;
			}
			ctx.drawImage(imgPic, i * 100, 0, 100, 100, 0, 0, 100, 100);
		}

	</script>
</body>
</html>